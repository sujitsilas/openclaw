{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Identity Documents",
  "description": "Schema for personal identification documents",
  "type": "object",
  "properties": {
    "recordType": {
      "type": "string",
      "enum": [
        "passport",
        "drivers-license",
        "national-id",
        "birth-certificate",
        "ssn",
        "visa",
        "residence-permit",
        "citizenship"
      ]
    },
    "date": {
      "type": "string",
      "format": "date-time"
    },
    "personal": {
      "type": "object",
      "properties": {
        "fullName": {
          "type": "string"
        },
        "legalName": {
          "type": "string"
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date"
        },
        "placeOfBirth": {
          "type": "string"
        },
        "gender": {
          "type": "string"
        },
        "nationality": {
          "type": "string"
        }
      },
      "required": ["fullName", "dateOfBirth"]
    },
    "document": {
      "type": "object",
      "properties": {
        "number": {
          "type": "string"
        },
        "issuingAuthority": {
          "type": "string"
        },
        "issuingCountry": {
          "type": "string"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "expirationDate": {
          "type": "string",
          "format": "date"
        },
        "placeOfIssue": {
          "type": "string"
        }
      },
      "required": ["number"]
    },
    "passport": {
      "type": "object",
      "properties": {
        "passportNumber": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["regular", "diplomatic", "service", "emergency"]
        },
        "machineReadableZone": {
          "type": "string"
        }
      }
    },
    "driversLicense": {
      "type": "object",
      "properties": {
        "licenseNumber": {
          "type": "string"
        },
        "class": {
          "type": "string"
        },
        "restrictions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "endorsements": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "state": {
          "type": "string"
        }
      }
    },
    "address": {
      "type": "object",
      "properties": {
        "street": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "state": {
          "type": "string"
        },
        "postalCode": {
          "type": "string"
        },
        "country": {
          "type": "string"
        }
      }
    },
    "attachments": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "filename": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["front", "back", "photo", "scan"]
          },
          "contentType": {
            "type": "string"
          },
          "encryptedPath": {
            "type": "string"
          }
        }
      }
    },
    "privacy": {
      "type": "object",
      "properties": {
        "shareable": {
          "type": "boolean",
          "default": false
        },
        "verificationOnly": {
          "type": "boolean",
          "default": true,
          "description": "Allow verification without sharing full details"
        },
        "restrictedFields": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "required": ["recordType", "date", "personal", "document"]
}
